<div class="app-wrapper">

  <app-header *ngIf="!isInIframe">
    <span class="spacer"></span>
  </app-header>

  <mat-toolbar color="primary" class="embedded-wrapper" *ngIf="isInIframe">

    <div class="logo" *ngIf="courseID === null; else clickableLogo">
      <img alt="" src="assets/logos/dvv-white.svg">
    </div>

  <ng-template #clickableLogo>
    <div class="logo logo-clickable"
        matRipple
        >
    <img  alt=""
          src="assets/logos/dvv-white.svg"
          >
      </div>
  </ng-template>
  
    <span class="spacer"></span>

    <div class="role theme-header-text-small">{{ (user$ | async)?.asemaStr }}</div>
    <!-- <div class="name theme-header-text-small">{{(user$ | async)?.nimi }}</div> -->


    <button aria-label="Käyttäjävalikko"
            i18n-aria-label="@@Käyttäjävalikko"
            i18n-matTooltip="@@Käyttäjävalikko"
            mat-icon-button
            [matMenuTriggerFor]="menu"
            [matTooltipShowDelay]="600"
            matTooltip="Käyttäjävalikko"
            >
      <mat-icon>account_circle</mat-icon>
    </button>

    <mat-menu #menu="matMenu">
      <app-usermenu></app-usermenu>
    </mat-menu>

  </mat-toolbar>

  <main>

    <mat-progress-bar
        class="theme-progress-bar"
        mode="indeterminate"
        *ngIf="isLoading | async"
        [ngStyle]="{'margin-bottom': isInIframe ? '1rem' : '0'}"
        >
    </mat-progress-bar>

    <div class="vertical-spacer" *ngIf="isInIframe"></div>

    <router-outlet></router-outlet>

  </main>

  <app-footer></app-footer>

</div>
