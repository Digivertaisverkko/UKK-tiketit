
<h2 class="main-header" *ngIf="courseName.length > 0 && !isInIframe" id="courseName">
  <span>{{courseName}}</span>
</h2>

<div class="view-wrapper"> <!-- Koska oikealle extra paddingia. -->

<div class="top-buttons">
  <app-to-beginning-button></app-to-beginning-button>

  <button
    class="remove-button"
    (click)="changeRemoveButton()"
    *ngIf="fieldID !== null && isRemovePressed === false"
    mat-raised-button
    i18n="@@Poista">
    Poista
  </button>

  <button mat-raised-button (click)="sendField(true)"
    *ngIf="isRemovePressed === true" color="accent" i18n="@@Vahvista poisto">
    Vahvista poisto
  </button>

</div>

<h3 class="sub-header" i18n="@@Kysymysten lisäkentät">Kysymysten lisäkentät</h3>

<form action="" #submitForm="ngForm" accept-charset="UTF-8">

  <mat-form-field class="field-title" appearance="fill">
    <!-- <mat-label>{{ field.otsikko }}</mat-label> -->
    <input name="kentta.otsikko" [(ngModel)]="field.otsikko" matInput maxlength="50" placeholder="Kentän nimi" i18n-placeholder="@@Kentän nimi">
    <mat-hint align="end">{{field.otsikko.length}} / 50</mat-hint>
  </mat-form-field>

  <div class="multiple-selection-wrapper">
    <mat-checkbox [(ngModel)]="multipleSelection" name="checkbox" i18n="@@Monivalinta">Monivalinta</mat-checkbox>

    <mat-form-field class="chip-list-form-field" appearance="fill" >
      <mat-label i18n="@@Monivalinnan vaihtoehdot">Monivalinnan vaihtoehdot</mat-label>
      <mat-chip-grid #chipGrid aria-label="Valitse monivalinnan vaihtoehtoja" [disabled]="!multipleSelection">

        <mat-chip-row *ngFor="let valinta of field.valinnat"
          [editable]="true"
          (edited)="edit(valinta, $event)"
          (removed)="remove(valinta)" 
          [aria-description]="'paina enter muokataksesi valintaa ' + valinta">
          {{valinta}}
          <button matChipRemove [attr.aria-label]="'poista valinta ' + valinta">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip-row>

        <input placeholder="Uusi valinta"
          [matChipInputFor]="chipGrid"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          [matChipInputAddOnBlur]="addOnBlur"
          (matChipInputTokenEnd)="add($event)"/>

      </mat-chip-grid>
    </mat-form-field>
    
  </div>

  <p class="theme-label info-text-label" i18n="@@Infoteksti">Info-teksti</p>

  <mat-form-field class="text-area-wrapper">
    <textarea
      [(ngModel)]="field.ohje"
      #autosize="cdkTextareaAutosize"
      autocomplete="off"
      cdkAutosizeMaxRows="5"
      cdkAutosizeMinRows="3"
      cdkTextareaAutosize
      contenteditable
      matInput
      maxlength="255"
      name="infoText"
      placeholder="Info-teksti"
      i18n-placeholder="@@Infoteksti"
    ></textarea>

    <mat-hint align="end">{{field.ohje.length}} / 255</mat-hint>
  
  </mat-form-field>

  <app-error-card
    *ngIf="errorMessage.length > 0"
    i18n-title="@@Virhe"
    title="Virhe"
    message="{{ errorMessage }}"
    [styles]="{ margin: '1rem 1rem' }"
  >
  </app-error-card>

  <div class="bottom-buttons-wrapper">
    <mat-checkbox class="mandatory-checkbox" [(ngModel)]="field.pakollinen"  name="checkbox-mandatory" i18n="@@Pakollinen">Pakollinen</mat-checkbox>
    <mat-checkbox class="prefillable-checkbox" [(ngModel)]="field.esitaytettava" name="checkbox-prefillable" i18n="@@Esitäytettävä">Esitäytettävä</mat-checkbox>

    <div class="spacer bottom-spacer"></div>

    <button
      class="cancel-button"
      [routerLink]="'/course/' + courseID + '/settings'"
      mat-raised-button
      i18n="@@Peru">
      Peru
    </button>

    <button
      class="send-button"
      (click)="sendField()"
      color="primary"
      mat-raised-button
      i18n="@@Lähetä">
      Lähetä
    </button>

  </div>

</form>

</div>
