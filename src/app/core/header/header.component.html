<mat-toolbar color="primary">

    <div class="logo" *ngIf="courseID === null; else clickableLogo">
      <img alt="" src="assets/logos/Tukki_logo_rgb_tummasini.svg">
    </div>

  <ng-template #clickableLogo>
    <div class="logo logo-clickable"
        matRipple
        [matRippleRadius]="30"
        [matRippleUnbounded]="true"
        >
    <img  alt=""
          (click)="logoClicked()"
          src="assets/logos/Tukki_logo_rgb_tummasini.svg"

          >
          <!-- src="assets/logos/dvv-white.svg" -->
      </div>
  </ng-template>

  <span class="spacer"></span>

  <!-- Näkymät voivat asettaa näiden tagien sisään sisältöä, jos tulee tarpeen. -->
  <ng-content></ng-content>

  <section class="user-info" *ngIf="user">

    <ng-container *ngIf="!(handsetPB$ | async)?.matches">
      <div class="theme-header-text">
        {{ user.nimi.length > maxUserLength ?
              (user.nimi | slice:0:maxUserLength) + '...' :
              (user.nimi) | titlecase }}
      </div>

      <!-- Voi olla tilanteita, missä käyttäjälle ei ole asetettu nimeä,
      niin näytetään silloin sähköpostiosoite. -->
      <div class="email theme-header-text"
          *ngIf="user.nimi.length === 0 && user.sposti.length > 0">
          {{ user.sposti.length > maxUserLength ?
              (user.sposti | slice:0:maxUserLength) + '...':(user.sposti) }}
      </div>
    </ng-container>

    <div class="theme-header-text-small">{{ user.asemaStr }}</div>

  </section>

  <button aria-label="Valikko"
          class="material-symbols-outlined"
          data-testid="account-button"
          id="account-icon-button"
          i18n-aria-label="@@Valikko"
          mat-icon-button
          [matMenuTriggerFor]="accountMenu"
          >
    <mat-icon >account_circle</mat-icon>
  </button>

</mat-toolbar>

<!----------------- Valikko --------------------------------------------------->
<mat-menu #accountMenu="matMenu">

  <button mat-menu-item
            (click)="toggleLanguage()"
            [disabled]="disableLangSelect"
            i18n="@@vaihda kieli"
            >
    Change to English
  </button>

  <button (click)="goTo('profile')"
        i18n="@@Profiili"
        i18n-aria-label="@@Profiili"
        mat-menu-item
        *ngIf="(isLoggedIn$ | async) === true"
        >
    Profiili
  </button>

  <button i18n="@@Kurssin asetukset"
        mat-menu-item
        *ngIf="((user$ | async)?.asema === 'opettaja' ||
                (user$ | async)?.asema === 'admin') &&
              (isParticipant$ | async) === true"
              (click)="goTo('settings')"
        >
    Kurssin asetukset
  </button>

  <button (click)="login()"
          data-testid="login-button"
          i18n="@@Kirjaudu sisään"
          mat-menu-item
          *ngIf="(isLoggedIn$ | async) === false"
          >
    Kirjaudu sisään
  </button>

  <button (click)="logout()"
          data-testid="logout-button"
          i18n="@@Kirjaudu ulos"
          mat-menu-item
          *ngIf="(isLoggedIn$ | async) === true"
          >
    Kirjaudu ulos
  </button>

</mat-menu>
