<mat-progress-bar class="theme-progress-bar" mode="indeterminate" *ngIf="!isLoaded"></mat-progress-bar>

<div class="faq-view" *ngIf="isLoaded">

  <h2 class="main-header" *ngIf="courseName.length > 0 && !isInIframe">
    <!-- Jos k√§ytet√§√§n kirjautumisen tunnistinta. -->
    <!-- <h2 class="main-header" *ngIf="courseName.length > 0 && !isInIframe; else verticalSpacer"> -->
    <span>{{ courseName }}</span>
  </h2>

  <ng-template #verticalSpacer>
    <div class="vertical-spacer"></div>
  </ng-template>

  <div id="top-buttons" class="theme-actions">
    <app-to-beginning-button></app-to-beginning-button>

    <!-- Tiketin tilan tarkastamalla tiet√§√§, saatiinko tiedot haettua. -->
    <div class="edit-buttons-wrapper">
      <div id="hidden-buttons-wrapper" *ngIf="(user.asema === 'opettaja' || user.asema === 'admin') && ticket.tila > 0">
        <button mat-raised-button i18n="@@Muokkaa"
          (click)="editFaq()">
          Muokkaa
        </button>

        <button mat-raised-button *ngIf="isArchivePressed === false" i18n="@@Poista" (click)="changeArchiveButton()">
          Poista
        </button>

        <button mat-raised-button (click)="archiveFaq()" *ngIf="isArchivePressed === true" color="accent" i18n="@@Vahvista poisto">
          Vahvista poisto
        </button>
      </div>

      <button mat-raised-button
              i18n="@@Kopioi linkki"
              onclick="navigator.clipboard.writeText(window.location.href)"
              *ngIf="isCopyToClipboardPressed === false"
              (click)="isCopyToClipboardPressed = true"
              >
        Kopioi linkki
      </button>
      <button mat-raised-button
              i18n="@@Kopioitu leikep√∂yd√§lle"
              onclick="navigator.clipboard.writeText(window.location.href)"
              *ngIf="isCopyToClipboardPressed === true"
              >
        Kopioitu leikep√∂yd√§lle
      </button>

    </div>

  </div>

  <section *ngIf="ticket.viesti !== undefined">

    <h3 class="sub-header">{{ ticket.otsikko }}</h3>

    <!----------- Kysymys ----------->

    <div *ngIf="ticket.kentat !== undefined && ticket.kentat[0] !== null && ticket.kentat[0].arvo.length > 0">
      <p class="theme-label"><span i18n="@@Teht√§v√§">Teht√§v√§</span></p>
      <p class="short-field-value">{{ticket.kentat[0].arvo }}</p>
      <!-- <span *ngIf="ticket.kentat !== undefined && ticket.kentat[0] !== null" i18n="@@Teht√§v√§">Teht√§v√§ {{
        ticket.kentat[0].arvo }} </span> -->
    </div>

    <div *ngIf="ticket.kentat !== undefined && ticket.kentat[1] !== null && ticket.kentat[1].arvo.length > 0">
      <p class="theme-label" i18n="@@Tyyppi">Tyyppi</p>
      <!-- üûÑ<span>{{ ticket.aikaleima | date : "short" }}</span> -->
      <p class="short-field-value">{{ ticket.kentat[1].arvo }} </p>
    </div>

    <h4 class="sub-header" i18n="@@Kysymys">Kysymys</h4>

    <app-message class="message" [messageHtml]=ticket.viesti></app-message>

    <app-view-attachments *ngIf="ticket.liitteet" [ticketID]="ticket.id" [files]="ticket.liitteet">
    </app-view-attachments>

    <hr class="theme-divider">

    <!----------- Vastaus ----------->

    <h4 class="sub-header" i18n="@@Vastaus">Vastaus</h4>

    <div class="short-vertical-spacer"></div>

    <div *ngFor="let comment of ticket.kommentit">
        <app-message [messageHtml]=comment.viesti></app-message>
        <app-view-attachments *ngIf="comment.liitteet" [ticketID]="ticket.id" [files]="comment.liitteet">
      </app-view-attachments>
    </div>

  </section>

  <mat-card-content *ngIf="errorMessage.length > 0">
    <app-error-card
      i18n-title="@@Virhe"
      title="Virhe"
      message="{{ errorMessage }}"
      [styles]="{ margin: '1em 0' }"
    >
    </app-error-card>
  </mat-card-content>

</div>
