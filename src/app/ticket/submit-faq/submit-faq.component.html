<h2 class="main-header" *ngIf="courseName.length > 0 && !isInIframe"><span>{{ courseName }}</span></h2>

<div class="submit-faq">

  <div id="top-buttons" class="theme-actions">
    <app-to-beginning-button></app-to-beginning-button>
  </div>

  <form action="" #submitForm="ngForm" accept-charset="UTF-8">

    <div class="ticket-header">
      <mat-form-field appearance="fill" class="sub-header">
        <textarea
          [(ngModel)]="faqTitle"
          class="sub-header"
          #autosize="cdkTextareaAutosize"
          autocomplete="off"
          cdkAutosizeMaxRows="3"
          cdkAutosizeMinRows="1"
          cdkTextareaAutosize
          contenteditable
          matInput
          maxlength="255"
          name="faqTitle"
          placeholder="Otsikko"
          i18n-placeholder="@@Otsikko"
          required
        ></textarea>
      </mat-form-field>
    </div>

    <section class="short-field-wrapper">

      <div *ngFor="let kentta of ticketFields; let i = index">
        <mat-form-field appearance="fill">
          <mat-label>{{ kentta.otsikko }}</mat-label>
          <input
            name="kentta.otsikko_{{i}}"
            [(ngModel)]="ticketFields[i].arvo"
            matInput
            maxlength="50"
            placeholder=""
          >
        </mat-form-field>
        <div class="characters-label"><span class="theme-label">{{ kentta.arvo.length }} / 50</span></div>
      </div>

    </section>

    <h2 i18n="@@Kysymys">Kysymys</h2>
    <app-editor [(editorContent)]="faqMessage"></app-editor>

    <h2 i18n="@@Vastaus">Vastaus</h2>
    <app-editor [(editorContent)]="faqAnswer"></app-editor>

    <app-error-card *ngIf="errorMessage.length > 0" i18n-title="@@Virhe" title="Virhe"
      message="{{ errorMessage }}" [styles]="{ margin: '1em 20% 1em 20%' }">
    </app-error-card>

    <div class="theme-actions">
      <button mat-raised-button (click)="uploadClick.next()">
        <mat-icon>attach_file</mat-icon>Liit채 tiedostoja
      </button>

      <div class="spacer"></div>
        <button
          mat-raised-button color="primary"
          [disabled]="submitForm.invalid || this.faqMessage.length === 0 || this.faqAnswer.length === 0"
          (click)="sendFaq()"
          i18n="@@Julkaise">
          Julkaise
        </button>
    </div>

    <app-edit-attachments [uploadClicks]="uploadClick.asObservable()" (fileListOutput)="fileList = $event">
    </app-edit-attachments>

  </form>

  <!-------------- Alkuper채inen kysymys ----------------------------------------->

  <div *ngIf="originalTicket !== undefined && !editExisting">
    <hr class="theme-divider">
    <h2 class="main-header" i18n="@@Alkuper채inen kysymys">Alkuper채inen kysymys</h2>
    <app-ticket-view [ticketIdFromParent]="ticketId"></app-ticket-view>
  </div>

</div>
