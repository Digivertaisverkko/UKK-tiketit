<h2 class="main-header"
    *ngIf="courseName.length > 0 && !isInIframe">
  <span>{{ courseName }}</span>
</h2>

<div class="submit-ticket">

  <div class="vertical-spacer" *ngIf="isInIframe"></div>

  <app-to-beginning-button></app-to-beginning-button>

  <form accept-charset="UTF-8"
        action=""
        enctype="multipart/form-data"
        #submitForm="ngForm">

    <div class="ticket-header">

      <mat-form-field appearance="fill" class="sub-header">
        <textarea autocomplete="off"
                  #autosize="cdkTextareaAutosize"
                  cdkAutosizeMaxRows="3"
                  cdkAutosizeMinRows="1"
                  cdkTextareaAutosize
                  contenteditable
                  class="sub-header"
                  i18n-placeholder="@@Otsikko"
                  matInput
                  maxlength="255"
                  name="titleText"
                  [(ngModel)]="title"
                  placeholder="Otsikko"
                  required>
          </textarea>
      </mat-form-field>

      <div class="user-info-block">
        <div class="text-info">
          <span class="theme-profile-name">{{ userName }}</span>
          <div class="theme-label">
            <span i18n="@@Minä">Minä</span>
            -
            <span i18n="@@Tänään">Tänään </span>
            <span>{{ currentDate | date: 'shortTime' }}</span>
          </div>
        </div>
        <img alt="" mat-card-avatar src="../../../assets/logos/UniOulu.png">
      </div>

    </div>

    <section class="short-field-wrapper">

      <ng-container *ngFor="let kentta of ticketFields">
        <mat-form-field class="additional-field" appearance="fill">
          <mat-label>{{ kentta.otsikko }}</mat-label>
          <input  matInput
                  maxlength="50"
                  name="kentta.otsikko"
                  [(ngModel)]="kentta.arvo"
                  placeholder="Kentän nimi">
        </mat-form-field>
        <div class="characters-label">
          <span class="theme-label">{{ kentta.arvo.length }} / 50</span>
        </div>
      </ng-container>

    </section>

    <h2 i18n="@@Viesti">Viesti</h2>
    <app-editor [(editorContent)]="message"></app-editor>

    <app-error-card i18n-title="@@Virhe"
                    message="{{ errorMessage }}"
                    *ngIf="errorMessage.length > 0"
                    [styles]="{ margin: '1em 20% 1em 20%' }"
                    title="Virhe">
    </app-error-card>

    <div class="theme-actions">

      <button (click)="uploadClick.next()"
              i18n="@@Liitä tiedostoja"
              mat-raised-button>
        <mat-icon>attach_file</mat-icon>
        Liitä tiedostoja
      </button>

      <div class="spacer"></div>

      <button class="submit-button"
              (click)="sendTicket()"
              [disabled]="submitForm.invalid"
              i18n="@@Lähetä opettajille"
              mat-raised-button color="primary">
        Lähetä opettajille
      </button>

    </div>

    <app-edit-attachments
        (fileListOutput)="fileList = $event"
        [uploadClicks]="uploadClick.asObservable()">
    </app-edit-attachments>

  </form>

</div>
